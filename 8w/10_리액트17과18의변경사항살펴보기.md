# 10. 리액트 17과 18의 변경 사항 살펴보기

## 10.1 리액트 17 버전 살펴보기

### 10.1.1 리액트의 점진적인 업그레이드

- 리액트 17버전 부터는 하나의 어플리케이션에 2개 이상의 버전이 존재가 가능하도록 업데이트
- 리액트 17 버전에서 16 버전을 lazy 하게 불러오고, 리액트 16을 위한 별도의 루트 요소를 만들어주면 문제 없이 구동 된다

### 10.1.2 이벤트 위임 방식의 변경

- 기존의 16 버전의 리액트는 이벤트를 document 레벨에서 관리하며 필요한 이벤트를 각각의 컴포넌트에 위임하는 방식으로 작동
- 하지만, 이렇게 할 경우 16과 17 버전이 혼재될 경우 하나의 document 에서 다른 버전의 이벤트 핸들러가 존재하게 되므로 문제가 발생할 가능성이 존재
- 이를 해결하고, 점진적인 업그레이드가 가능하도록 17 버전에서는 이벤트 위임을 document 레벨이 아닌 컴포넌트의 최상위 루트에서 처리 하도록 변경 -> 따라서 16 버전은 16 버전의 컴포넌트 루트에서 이벤트를 위임 / 17 버전은 17 버전의 컴포넌트 루트에서 이벤트를 위임하게 되므로 문제 해결이 가능하다
- 또한, JQeury 등의 타 라이브러리와의 충돌도 예방한다

```tsx
import React, { MouseEvent, useEffect } from "react";
import ReactDOM from "react-dom";
export default function App() {
  useEffect(() => {
    document.addEventListener("click", (e) => {
      console.log("이벤트가 document까지 올라옴");
    });
  }, []);

  function 안녕하세요(e: MouseEvent<HTMLButtonElement>) {
    e.stopPropagation();
    alert("안녕하세요!");
  }

  return <button onClick={안녕하세요}>리액트 버튼</button>;
}

ReactDOM.render(<App />, document.getElementById("root"));
```

- 위의 코드는 리액트 16과 17에서 다르게 동작
- 16 에서는 모든 이벤트가 document 에 달려 있기 때문에 e.stopPropagation() 이 의미가 없으므로, 이벤트가 작동
- 17 에서는 이벤트가 컴포넌트 루트에 달려 있으므로 e.stopPropagation() 가 동작하여, 이벤트가 작동하지 않는다

### 10.1.3 import React from 'react' 가 더 이상 필요 없다 : 새로운 JSX transform

- 17 버전 부터는 바벨과 협력하여 import React from 'react' 없이도 JSX 를 해석이 가능하여 에러가 발생하지 않는다
- 불필요한 import 를 삭제해 번들링 크기를 줄이고, 컴포넌트 작성을 더 간결하게 해준다
